<!DOCTYPE html>
<html lang="en-US" dir="ltr">

  <head>
  	<script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <script src="https://unpkg.com/moralis/dist/moralis.js"></script>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <!-- ===============================================-->
    <!--    Document Title-->
    <!-- ===============================================-->
    <title>Renaoodles</title>


    <!-- ===============================================-->
    <!--    Favicons-->
    <!-- ===============================================-->
    <link rel="apple-touch-icon" sizes="180x180" href="assets/img/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/img/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/img/favicons/favicon-16x16.png">
    <link rel="shortcut icon" type="image/x-icon" href="assets/img/favicons/favicon.ico">
    <link rel="manifest" href="assets/img/favicons/manifest.json">
    <meta name="msapplication-TileImage" content="assets/img/favicons/mstile-150x150.png">
    <meta name="theme-color" content="#ffffff">


    <!-- ===============================================-->
    <!--    Stylesheets-->
    <!-- ===============================================-->
    <link href="assets/css/theme.css" rel="stylesheet" />

  </head>


  <body>

    <!-- ===============================================-->
    <!--    Main Content-->
    <!-- ===============================================-->
    <main class="main" id="top">
 
    
      
      <section class="py-0" id="home">
        
        <!--/.bg-holder-->

        
        <!--/.bg-holder-->

        <div class="container">
        	<div class="row justify-content-center">
        	
            <div class="col-auto mb-5 mb-md-7">
              <h1 class="fw-semi-bold text-warning">Reinaoodles<span class="text-1100"> DApp</span></h1>
              </div>
              </div>
             
              	<div class="row justify-content-center">
        	
            <div class="col-auto mb-5 mb-md-7">
              <h3 class="text-1100" id="titulo"></h5>
              <br>
              <div class="col-lg-12 d-flex justify-content-center">
              	
                     <button class="btn btn-lg btn-primary rounded-pill font-base" id="btn-login" type="submit">Connect Wallet</button>
                     
                     
                     
      
                     <div id="adicionar">
                     	</div>
                
                  </div>
                <br/>
         </div>
      </section>
    </main>
    <!-- ===============================================-->
    <!--    End of Main Content-->
    <!-- ===============================================-->



    <script>
    	dive = document.getElementById('adicionar')
    butao = document.getElementById('btn-login')
    	function mostrar_nft(lista){
    	var titulo = document.getElementById('titulo')
   
    titulo.innerHTML = "Suas NFTs em carteira Polygon são: "
    
    	butao.remove()
    	lista.forEach(function (item, indice){
    	console.log(indice)
    	var lb_inp = document.createElement('p');
    var quebra = document.createElement('br');
    lb_inp.innerHTML = item
    lb_inp.setAttribute("class", "h5 mb-4 font-base")
    lb_inp.setAttribute("id", `que${indice}`);
    
    dive.appendChild(lb_inp)
    lb_inp.appendChild(quebra)
    
    	
    })
    }
    
    
    	async function pegar_nfts(adress){
    	let response = await fetch(`http://heroku-api-cpf.herokuapp.com/nft/${adress}/`)
        let data = await response.json();
        var lista = data['nft']
        console.log(lista)
        mostrar_nft(lista)
    }
    
    
    	Moralis.initialize("caeF0zqGmb0y4VA1oipMibSpztx7cKD1ApZL2e0A");
        Moralis.serverURL = "https://o3hc9we1qfoz.usemoralis.com:2053/server";
        async function login() {
            Moralis.Web3.authenticate().then(function (user) {
            
                console.log(user.get('ethAddress'))
                var adress = user.get('ethAddress')
                pegar_nfts(adress)
            })
              .catch(error => alert("Para você usar nosso DApp você precisa conectar sua carteira"));
        }
        document.getElementById("btn-login").onclick = login();
    </script>
    <!-- ===============================================-->
    <!--    JavaScripts-->
    <!-- ===============================================-->
    <script src="vendors/@popperjs/popper.min.js"></script>
    <script src="vendors/bootstrap/bootstrap.min.js"></script>
    <script src="vendors/is/is.min.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=window.scroll"></script>
    <script src="assets/js/theme.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet">
  </body>

</html>